THIS IS OUT OF ORDER AND A BIT OF A MESS
Too much manual copying of data for backups from WLS to CloudNinja and local Dev laptop for git

BACK UP K8s etcd from k8s box
sudo ETCDCTL_API=3 etcdctl --endpoints=https://192.168.10.50:2379 --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/server.crt --key=/etc/kubernetes/pki/etcd/server.key snapshot save /data/etcdbk/etcd_backup.$(date +"%Y%m%d.%H%M%S").bk
cp /data/etcdbk/etcd_backup.20210830.163205.bk //cloudninja/homelab/etcdbk/



-- On Dev machine
- Update README to include latest release info

Copy: C:\Users\matthews\Documents\__ULTIMATE_SOFTWARE\___CodingProjects\LearnGO\goodadvice
To: \\cloudninja\matt\homelab\k8s\go

-- From WLS
- Create new back up of DB in MySQL
Add it to back up folder in project
mysqldump -u root -pToolbox24 -h mysql --databases mjs --single-transaction --quick --lock-tables=false > //cloudninja/homelab/goodadvice_db_backups/goodadvice_full_bkup.$(date +"%Y%m%d.%H%M%S").sql

- Create new DB Structure file in MySQL
mysqldump -u root -pPassword -h mysql --opt mjs -d --single-transaction | sed 's/ AUTO_INCREMENT=[0-9]*//g' > //cloudninja/homelab/k8s/go/goodadvice/Gooadvice.sql.Database.StructureOnly.0.0.9

-- On Dev machine
- Push to github
git push


-- From WLS
- Clear out old goodadvice folder
rm -rf mattscloud/go/goodadvice
- copy in new version
cp /cloudninja/homelab/k8s/go/goodadvice -r mattscloud/go
- build and push the docker image
docker build -t 192.168.10.50:5000/local/goodadvice:0.0.**VERSION** mattscloud/go/goodadvice/.
docker push 192.168.10.50:5000/local/goodadvice:0.0.**VERSION**

Then in K8s edit deploy with the new version and let k8s roll the pods
kubectl edit deploy goodadvice

Change Image Version
containers:
- image: 192.168.10.50:5000/local/goodadvice:0.0.**VERSION**

K8s will roll over to the new version
